jQuery.fn.flexymenu = function (i) { function e() { window.innerWidth <= 767 ? (d(), t(), 1 == h && (u(), h = !1)) : (s(), n(), "horizontal" == l.type && "right" == l.align && 0 == h && (u(), h = !0)) } function n() { navigator.userAgent.match(/Mobi/i) || window.navigator.msMaxTouchPoints > 0 ? (jQuery(o).find("a").on("click touchstart", function (i) { i.stopPropagation(), i.preventDefault(), window.location.href = jQuery(this).attr("href"), jQuery(this).parent("li").siblings("li").find("ul").stop(!0, !0).fadeOut(l.speed), "none" == jQuery(this).siblings("ul").css("display") ? jQuery(this).siblings("ul").stop(!0, !0).fadeIn(l.speed) : (jQuery(this).siblings("ul").stop(!0, !0).fadeOut(l.speed), jQuery(this).siblings("ul").find("ul").stop(!0, !0).fadeOut(l.speed)) }), 1 == l.hideClickOut && jQuery(document).bind("click.menu touchstart.menu", function (i) { 0 == jQuery(i.target).closest(o).length && jQuery(o).find("ul").fadeOut(l.speed) })) : jQuery(o).find("li").bind("mouseenter", function () { jQuery(this).children("ul").stop(!0, !0).fadeIn(l.speed) }).bind("mouseleave", function () { jQuery(this).children("ul").stop(!0, !0).fadeOut(l.speed) }) } function t() { jQuery(o).find("li:not(.showhide)").each(function () { jQuery(this).children("ul").length > 0 && jQuery(this).children("a").on("click", function () { "none" == jQuery(this).siblings("ul").css("display") ? jQuery(this).siblings("ul").slideDown(l.speed) : jQuery(this).siblings("ul").slideUp(l.speed) }) }) } function d() { jQuery(o).children("li:not(.showhide)").hide(0), jQuery(o).children("li.showhide").show(0).bind("click", function () { jQuery(o).children("li").is(":hidden") ? jQuery(o).children("li").slideDown(l.speed) : (jQuery(o).children("li:not(.showhide)").slideUp(l.speed), jQuery(o).children("li.showhide").show(0)) }) } function s() { jQuery(o).children("li").show(0), jQuery(o).children("li.showhide").hide(0) } function u() { jQuery(o).children("li").addClass("right"); var i = jQuery(o).children("li"); jQuery(o).children("li:not(.showhide)").detach(); for (var e = i.length; e >= 1; e--) jQuery(o).append(i[e]) } function r() { jQuery(o).find("li, a").unbind(), jQuery(document).unbind("click.menu touchstart.menu"), jQuery(o).find("ul").hide(0) } var l = { speed: 300, type: "horizontal", align: "left", indicator: !1, hideClickOut: !0 }; jQuery.extend(l, i); var h = !1, o = jQuery(this), c = window.innerWidth; "vertical" == l.type && (jQuery(o).addClass("vertical"), "right" == l.align && jQuery(o).addClass("right")), 1 == l.indicator && jQuery(o).find("li").each(function () { jQuery(this).children("ul").length > 0 && jQuery(this).append("<span class='indicator'>+</span>") }), jQuery(o).prepend("<li class='showhide'><span class='icon'><em></em><em></em><em></em></span></li>"), e(), jQuery(window).resize(function () { 767 >= c && window.innerWidth > 767 && (r(), s(), n(), "horizontal" == l.type && "right" == l.align && 0 == h && (u(), h = !0)), c > 767 && window.innerWidth <= 767 && (r(), d(), t(), 1 == h && (u(), h = !1)), c = window.innerWidth }) };